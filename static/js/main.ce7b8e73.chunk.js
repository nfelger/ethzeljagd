(this["webpackJsonpeth-hunt"]=this["webpackJsonpeth-hunt"]||[]).push([[0],{1012:function(e,t,n){"use strict";n.r(t);var a=n(6),c=n.n(a),r=n(365),s=n.n(r),i=(n(375),n(376),n(34)),l=n(1018),o=n(1017),d=n(17),u=n.n(d),b=n(72),j=n(115),f=n(4);function h(e){var t=e.children,n=e.extraClassNames,a=e.delay,c=Object(f.jsx)("div",{className:"p-6 text-center ".concat(n||""),children:t});return a?Object(f.jsx)(j.a,{delay:a,children:c}):c}var m=Object(l.a)({id:"auth",initial:"unauthenticated",states:{unauthenticated:{on:{FABIAN:"fabian",NOT_FABIAN:"notFabian",FAIL:"fail"}},fabian:{entry:"complete"},notFabian:{},fail:{}}});function x(){return(x=Object(b.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"});case 2:n=e.sent[0],t(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){var t=e.fabiansEth,n=e.onComplete,a=Object(o.a)(m,{actions:{complete:n}}),c=Object(i.a)(a,2),r=c[0],s=c[1],l=function(e){s(e===t?"FABIAN":"NOT_FABIAN")};switch(r.value){case"unauthenticated":return Object(f.jsx)("button",{onClick:function(){return function(e){return x.apply(this,arguments)}(l)},className:"bg-green-500 px-9 py-3 text-center font-extrabold rounded-full",children:"Mit MetaMask verbinden"});case"fail":return Object(f.jsx)(h,{children:"Da ist was schiefgegangen."});case"notFabian":return Object(f.jsxs)(h,{children:["Nicht ",Object(f.jsx)("code",{children:"fabians.eth"}),". Hau ab."]});case"fabian":default:return null}}var g=n(44);function p(e){return Object(f.jsx)("div",Object(g.a)(Object(g.a)({},e),{},{className:"w-72 h-72 text-9xl text-black text-center align-middle font-bold rounded-lg border-black border-2 bg-gray-100 flex flex-col justify-center",children:Object(f.jsx)("span",{children:"?"})}))}var v=Object(l.a)({id:"prelude",initial:"msg1",states:{msg1:{after:{2500:"msg2"}},msg2:{after:{1e3:"msg3"}},msg3:{after:{2e3:"msg4"}},msg4:{}}});function k(e){var t=e.onComplete,n=Object(o.a)(v),a=Object(i.a)(n,2),c=a[0];a[1];switch(c.value){case"msg1":return Object(f.jsx)(h,{delay:500,children:"Hallo, fabians.eth!"});case"msg2":return Object(f.jsx)(h,{delay:500,children:"Hier ist eine Box."});case"msg3":return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(h,{children:"Hier ist eine Box."}),Object(f.jsx)(j.a,{delay:250,children:Object(f.jsx)(p,{})})]});case"msg4":return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(h,{children:"Hier ist eine Box."}),Object(f.jsx)("div",{className:"cursor-pointer",onClick:t,children:Object(f.jsx)(p,{})}),Object(f.jsx)(h,{delay:500,children:"Was da wohl drin ist? Klick mal drauf, vielleicht kannst du sie \xf6ffnen\u2026"})]});default:return null}}var y=n(18),w=n(229),A=n.p+"static/media/ethereum.23097e39.png",C=window.ethereum,N=new w.OpenSeaPort(C,{networkName:w.Network.Rinkeby});function S(e){var t=e.tokenAddress,n=e.tokenId,c=e.claimInProgress,r=void 0!==c&&c,s=e.claimed,l=void 0!==s&&s,o=Object(a.useState)(null),d=Object(i.a)(o,2),j=d[0],h=d[1];Object(a.useEffect)((function(){function e(){return(e=Object(b.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.api.getAsset({tokenAddress:t,tokenId:n});case 2:a=e.sent,console.log(a),h(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,n]);var m=Object(f.jsx)("div",{className:"absolute top-0 left-0 flex flex-col justify-center items-center animate-pulse h-full w-full",children:Object(f.jsx)("img",{src:A,height:"50",alt:"ethereum logo",className:"h-1/2 rounded-full bg-gray-100 p-4"})});return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("section",{className:"relative rounded-lg border-black border-2 bg-gray-100 p-4 text-black h-full",children:j?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"flex flex-col items-center justify-between h-full ".concat(l?"":"filter blur-sm"),children:[Object(f.jsx)("h1",{children:j.name}),Object(f.jsx)("img",{src:j.imageUrl,height:"164",alt:'OpenSea asset "'.concat(j.name,'"')})]}),r&&m]}):m})})}var F=n(230),I=n.n(F),E=new I.a(I.a.givenProvider||"ws://localhost:8545");E.eth.defaultChain="rinkeby";var B=new E.eth.Contract([{inputs:[{internalType:"uint256",name:"itemId",type:"uint256"},{internalType:"string",name:"secret",type:"string"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"}],"0x31D3032911888f34506a733Cbe1F2107bDa9A7C4");function D(){return(D=Object(b.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){B.methods.claim(t,n).send({from:K}).on("receipt",(function(t){e(t)})).on("error",(function(e){a(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=function(e,t){return D.apply(this,arguments)},R=n.p+"static/media/lock.129ba482.png",M=n.p+"static/media/lock-open.a05787d1.png";function L(e){var t=e.state,n=e.asset,c=e.onClaimed,r=Object(a.useState)(!1),s=Object(i.a)(r,2),l=s[0],o=s[1],d=Object(a.useState)(!1),j=Object(i.a)(d,2),h=j[0],m=j[1],x=function(){var e=Object(b.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o(!1),"iddqd"!==(a=t.target.code.value.toLowerCase())){e.next=7;break}return m(!1),c(),e.abrupt("return");case 7:return m(!0),e.prev=8,e.next=11,P(n.tokenId,a);case 11:r=e.sent,console.log(r),m(!1),c(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),alert("Fehler: ".concat(JSON.stringify(e.t0))),m(!1);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}();switch(t){case"locked":return Object(f.jsx)("div",{className:"rounded-lg border-black border-2 bg-gray-100 p-4 text-black h-full flex flex-col justify-center",children:Object(f.jsx)("img",{height:"164",src:R,alt:"lock"})});case"claimable":return l||h?Object(f.jsxs)("div",{className:"relative h-full",children:[Object(f.jsx)(S,{tokenAddress:n.tokenAddress,tokenId:n.tokenId,onClaimed:c,claimInProgress:h}),l&&Object(f.jsx)("div",{className:"absolute inset-y-1/4 mx-4 p-2 text-black text-base bg-gray-300 border-gray-500 border-2 rounded",style:{height:"fit-content"},children:Object(f.jsxs)("form",{onSubmit:x,children:[Object(f.jsxs)("label",{htmlFor:"code",className:"my-1",children:["Code?",Object(f.jsx)("input",{type:"text",name:"code",className:"w-full text-xl my-1"})]}),Object(f.jsx)("button",{type:"submit",className:"border-gray-500 border-2 my-1 p-1 rounded",children:"Los"})]})})]}):Object(f.jsx)("button",{onClick:function(){return o(!0)},className:"h-full",children:Object(f.jsx)("div",{className:"rounded-lg border-black border-2 bg-gray-100 p-4 text-black h-full flex flex-col justify-center",children:Object(f.jsx)("img",{height:"164",src:M,alt:"open lock"})})});case"claimed":return Object(f.jsx)(S,{tokenAddress:n.tokenAddress,tokenId:n.tokenId,claimed:!0});default:return null}}var T=[{tokenAddress:"0x88b48f654c30e99bc2e4a1559b4dcf1ad93fa656",tokenId:"58310386485557310259002237365246659266895050305048410171636348436913447763969"},{tokenAddress:"0x88b48f654c30e99bc2e4a1559b4dcf1ad93fa656",tokenId:"58310386485557310259002237365246659266895050305048410171636348438012959391745"},{tokenAddress:"0x88b48f654c30e99bc2e4a1559b4dcf1ad93fa656",tokenId:"58310386485557310259002237365246659266895050305048410171636348441311494275073"},{tokenAddress:"0x88b48f654c30e99bc2e4a1559b4dcf1ad93fa656",tokenId:"58310386485557310259002237365246659266895050305048410171636348439112471019521"}],H=Object(l.a)({id:"game",initial:"start",context:{message:"Nicht so schnell! Um die Box zu \xf6ffnen, musst du erst vier Tokens sammeln\u2026",assetStates:{1:"claimable",2:"locked",3:"locked",4:"locked"}},states:{start:{after:{5e3:"claimFour"}},claimFour:{on:{CLAIMED:{target:"claimThree",actions:Object(y.b)({assetStates:function(e){var t=e.assetStates;return Object(g.a)(Object(g.a)({},t),{},{1:"claimed",2:"claimable"})}})}},entry:Object(y.b)({message:"Finde die Person, die den ersten Code kennt. Hint: 30 Mark"})},claimThree:{on:{CLAIMED:{target:"claimTwo",actions:Object(y.b)({assetStates:function(e){var t=e.assetStates;return Object(g.a)(Object(g.a)({},t),{},{2:"claimed",3:"claimable"})}})}},entry:Object(y.b)({message:"Den n\xe4chsten Code hat der Besitzer eines zweih\xe4ndigen Elfen-Kampfhammers."})},claimTwo:{on:{CLAIMED:{target:"claimOne",actions:Object(y.b)({assetStates:function(e){var t=e.assetStates;return Object(g.a)(Object(g.a)({},t),{},{3:"claimed",4:"claimable"})}})}},entry:Object(y.b)({message:"Raidriiiiiiiiiiiiiiii!"})},claimOne:{on:{CLAIMED:{target:"nearlyDone",actions:Object(y.b)({assetStates:function(e){var t=e.assetStates;return Object(g.a)(Object(g.a)({},t),{},{4:"claimed"})}})}},entry:Object(y.b)({message:"Noch eine letzte MASSIVE Herausforderung\u2026"})},nearlyDone:{after:{500:"done"},entry:Object(y.b)({message:"Jetzt hast du alles, was du brauchst!"})},done:{}}});function z(e){var t=e.onComplete,n=Object(o.a)(H),a=Object(i.a)(n,2),c=a[0],r=a[1],s=function(){return r("CLAIMED")};return Object(f.jsxs)("div",{children:[Object(f.jsx)(h,{children:c.context.message}),Object(f.jsx)("ul",{className:"flex flex-row gap-4 items-stretch",children:T.map((function(e,t){return Object(f.jsx)("li",{className:"flex-1",children:Object(f.jsx)(L,{state:c.context.assetStates[t+1],asset:e,onClaimed:s})},e.tokenId)}))}),"done"===c.value&&Object(f.jsx)("button",{class:"block mx-auto mt-6 bg-gray-500 hover:bg-gray-400 hover:text-black px-9 py-3 text-center rounded-full",onClick:t,children:"Weiter"})]})}var G={tokenAddress:"0x88b48f654c30e99bc2e4a1559b4dcf1ad93fa656",tokenId:"58310386485557310259002237365246659266895050305048410171636348440211982647297"},V=Object(l.a)({id:"finale",initial:"start",states:{start:{after:{2e3:"showBox"}},showBox:{on:{ADVANCE:"revealedBox"}},revealedBox:{on:{ADVANCE:"claimed"}},claimed:{}}});function J(){var e=Object(o.a)(V),t=Object(i.a)(e,2),n=t[0],a=t[1];switch(n.value){case"start":return Object(f.jsx)(h,{delay:500,children:"Die Box geh\xf6rt fast dir!"});case"showBox":return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(h,{children:"Schnapp sie dir!"}),Object(f.jsx)(j.a,{delay:500,children:Object(f.jsx)("button",{onClick:function(){return a("ADVANCE")},children:Object(f.jsx)(p,{})})})]});case"revealedBox":return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(h,{children:["Ein letzter Code: ",Object(f.jsx)("code",{children:"fabians40.eth"})," (get it?)"]}),Object(f.jsx)("div",{className:"w-72",children:Object(f.jsx)(L,{state:"claimable",asset:G,onClaimed:function(){return a("ADVANCE")}})})]});case"claimed":return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(h,{children:"Endlich deins!"}),Object(f.jsx)(h,{children:"Finde heraus, was sich in der Box versteckt:"}),Object(f.jsx)("div",{className:"w-72",children:Object(f.jsx)("a",{href:"https://testnets.opensea.io/assets/".concat(G.tokenAddress,"/").concat(G.tokenId),children:Object(f.jsx)(L,{state:"claimed",asset:G})})})]});default:return null}}var q=Object(l.a)({id:"stage",initial:"auth",states:{auth:{on:{PROGRESS:"prelude"}},prelude:{on:{PROGRESS:"claimFour"}},claimFour:{on:{PROGRESS:"finale"}},finale:{}}});function _(e){var t=e.fabiansEth,n=Object(o.a)(q),a=Object(i.a)(n,2),c=a[0],r=a[1];switch(c.value){case"auth":return Object(f.jsx)(O,{fabiansEth:t,onComplete:function(){return r("PROGRESS")}});case"prelude":return Object(f.jsx)(k,{onComplete:function(){return r("PROGRESS")}});case"claimFour":return Object(f.jsx)(z,{onComplete:function(){return r("PROGRESS")}});case"finale":return Object(f.jsx)(J,{});default:return null}}var K="0x80eA825A030bcAbc7f7c4571f4ed1da2FB49d8bf".toLowerCase();var U=function(){return Object(f.jsx)("div",{className:"flex flex-col items-center mt-6 mx-2 text-white text-3xl",children:Object(f.jsx)(_,{fabiansEth:K})})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1019)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(U,{})}),document.getElementById("root")),W()},375:function(e,t,n){},376:function(e,t,n){},393:function(e,t){},395:function(e,t){},407:function(e,t){},408:function(e,t){},431:function(e,t){},433:function(e,t){},882:function(e,t){},884:function(e,t){},890:function(e,t){},892:function(e,t){},905:function(e,t){},922:function(e,t){},935:function(e,t){},945:function(e,t){},952:function(e,t){}},[[1012,1,2]]]);
//# sourceMappingURL=main.ce7b8e73.chunk.js.map